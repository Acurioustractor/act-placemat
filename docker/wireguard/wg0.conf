# WireGuard Server Configuration for ACT Placemat Intelligence Hub
# Australian-compliant secure tunneling for multi-agent communication

[Interface]
# Server configuration
PrivateKey = SERVER_PRIVATE_KEY_PLACEHOLDER
Address = 10.13.13.1/24
ListenPort = 51820

# DNS configuration (Australian DNS servers)
DNS = 1.1.1.1, 8.8.8.8

# Post-up and post-down scripts for Australian compliance
PostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth+ -j MASQUERADE; echo "$(date): WireGuard interface %i started - Australian compliance active" >> /var/log/wireguard/compliance.log
PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth+ -j MASQUERADE; echo "$(date): WireGuard interface %i stopped - Australian compliance session ended" >> /var/log/wireguard/compliance.log

# Routing for Intelligence Hub networks
PostUp = ip route add 172.20.0.0/16 via 10.13.13.1; echo "$(date): Australian Intelligence Hub routes configured" >> /var/log/wireguard/compliance.log
PostDown = ip route del 172.20.0.0/16 via 10.13.13.1 2>/dev/null || true

# Australian compliance metadata
# Data-Residency: Australia
# Compliance-Framework: Australian-Privacy-Act
# Purpose: Secure multi-agent communication
# Server-Location: Australia
# Encryption: ChaCha20Poly1305
# Key-Exchange: Curve25519

# Intelligence Hub Agent Peers (configured dynamically)

### BEGIN PEER CONFIG ###
# This section will be populated by the setup script with actual peer configurations
# Each peer represents an authorized agent or service in the multi-agent system

# Example peer configuration (will be replaced):
# [Peer]
# # Financial Intelligence Agent
# PublicKey = PEER_PUBLIC_KEY_PLACEHOLDER
# AllowedIPs = 10.13.13.2/32, 172.20.2.10/32
# PersistentKeepalive = 25
# # Australian-Compliance: Verified
# # Agent-Type: financial-intelligence
# # Data-Classification: internal

# [Peer]
# # Research Analyst Agent  
# PublicKey = PEER_PUBLIC_KEY_PLACEHOLDER
# AllowedIPs = 10.13.13.3/32, 172.20.2.11/32
# PersistentKeepalive = 25
# # Australian-Compliance: Verified
# # Agent-Type: research-analyst
# # Data-Classification: internal

# [Peer]
# # Compliance Officer Agent
# PublicKey = PEER_PUBLIC_KEY_PLACEHOLDER
# AllowedIPs = 10.13.13.4/32, 172.20.2.12/32
# PersistentKeepalive = 25
# # Australian-Compliance: Verified
# # Agent-Type: compliance-officer
# # Data-Classification: confidential

# [Peer]
# # Community Coordinator Agent
# PublicKey = PEER_PUBLIC_KEY_PLACEHOLDER
# AllowedIPs = 10.13.13.5/32, 172.20.2.13/32
# PersistentKeepalive = 25
# # Australian-Compliance: Verified
# # Agent-Type: community-coordinator
# # Data-Classification: community

# [Peer]
# # External Monitoring System
# PublicKey = PEER_PUBLIC_KEY_PLACEHOLDER
# AllowedIPs = 10.13.13.10/32
# PersistentKeepalive = 25
# # Australian-Compliance: Verified
# # System-Type: monitoring
# # Data-Classification: operational

### END PEER CONFIG ###

# Security considerations:
# - All peers must be verified as Australian-compliant
# - Keys are rotated every 90 days for security
# - All traffic is logged for compliance auditing
# - Only authorized multi-agent system components allowed
# - No split-tunneling to maintain data residency