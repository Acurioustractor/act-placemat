# ACT Placemat Alertmanager Templates
# Professional notification templates for different alert types

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: alertmanager-templates
  namespace: monitoring
data:
  email.tmpl: |
    {{ define "email.default.html" }}
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>ACT Placemat Alert</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5; }
            .container { background-color: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
            .header { background-color: #2E8B57; color: white; padding: 15px; margin: -20px -20px 20px -20px; border-radius: 5px 5px 0 0; }
            .alert { margin: 10px 0; padding: 15px; border-left: 4px solid #ff6b6b; background-color: #ffe6e6; }
            .warning { border-left-color: #ffa500; background-color: #fff4e6; }
            .critical { border-left-color: #ff0000; background-color: #ffe6e6; }
            .info { border-left-color: #007bff; background-color: #e6f3ff; }
            .footer { margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee; font-size: 12px; color: #666; }
            .btn { display: inline-block; padding: 10px 20px; background-color: #2E8B57; color: white; text-decoration: none; border-radius: 3px; }
            .labels { background-color: #f8f9fa; padding: 10px; border-radius: 3px; margin: 10px 0; }
            .label { display: inline-block; background-color: #6c757d; color: white; padding: 2px 6px; border-radius: 2px; margin: 2px; font-size: 11px; }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h2>ğŸŒ ACT Placemat Community Platform Alert</h2>
                <p>Platform monitoring notification</p>
            </div>
            
            <p><strong>Alert Summary:</strong> {{ len .Alerts }} alert(s) detected</p>
            <p><strong>Timestamp:</strong> {{ .CommonLabels.timestamp | date "2006-01-02 15:04:05 MST" }}</p>
            
            {{ range .Alerts }}
            <div class="alert {{ .Labels.severity }}">
                <h3>{{ .Annotations.summary }}</h3>
                <p><strong>Description:</strong> {{ .Annotations.description }}</p>
                
                <div class="labels">
                    <strong>Labels:</strong>
                    {{ range .Labels.SortedPairs }}
                    <span class="label">{{ .Name }}: {{ .Value }}</span>
                    {{ end }}
                </div>
                
                {{ if .Annotations.runbook_url }}
                <p><a href="{{ .Annotations.runbook_url }}" class="btn">View Runbook</a></p>
                {{ end }}
                
                <p><strong>Started:</strong> {{ .StartsAt | date "2006-01-02 15:04:05 MST" }}</p>
                {{ if .EndsAt }}
                <p><strong>Ended:</strong> {{ .EndsAt | date "2006-01-02 15:04:05 MST" }}</p>
                {{ end }}
            </div>
            {{ end }}
            
            <div class="footer">
                <p>
                    <a href="https://monitoring.actplacemat.org.au/grafana" class="btn">View Dashboards</a>
                    <a href="https://monitoring.actplacemat.org.au/alertmanager" class="btn">Manage Alerts</a>
                </p>
                <p>This alert was generated by the ACT Placemat monitoring system. If you believe this is an error, please contact the platform team.</p>
                <p><em>Respecting Country, Culture, and Community â€¢ ACT Placemat</em></p>
            </div>
        </div>
    </body>
    </html>
    {{ end }}

    {{ define "email.critical.html" }}
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>ğŸš¨ CRITICAL ALERT - ACT Placemat</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #ffe6e6; }
            .container { background-color: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 10px rgba(255,0,0,0.3); border: 2px solid #ff0000; }
            .header { background-color: #dc3545; color: white; padding: 15px; margin: -20px -20px 20px -20px; border-radius: 5px 5px 0 0; }
            .critical-banner { background-color: #ff0000; color: white; padding: 10px; text-align: center; font-weight: bold; font-size: 18px; margin: -20px -20px 20px -20px; }
            .alert { margin: 10px 0; padding: 15px; border-left: 4px solid #ff0000; background-color: #ffe6e6; }
            .urgency { background-color: #ffebee; border: 1px solid #f44336; padding: 15px; border-radius: 5px; margin: 15px 0; }
            .action-required { background-color: #fff3e0; border: 1px solid #ff9800; padding: 15px; border-radius: 5px; margin: 15px 0; }
            .btn-critical { display: inline-block; padding: 12px 25px; background-color: #dc3545; color: white; text-decoration: none; border-radius: 3px; font-weight: bold; margin: 5px; }
            .labels { background-color: #f8f9fa; padding: 10px; border-radius: 3px; margin: 10px 0; }
            .label { display: inline-block; background-color: #dc3545; color: white; padding: 3px 8px; border-radius: 3px; margin: 2px; font-size: 11px; font-weight: bold; }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="critical-banner">
                ğŸš¨ CRITICAL ALERT - IMMEDIATE ATTENTION REQUIRED ğŸš¨
            </div>
            
            <div class="header">
                <h2>ACT Placemat Critical System Alert</h2>
                <p>High priority incident detected</p>
            </div>
            
            <div class="urgency">
                <h3>âš ï¸ Immediate Action Required</h3>
                <p>This is a critical alert that requires immediate attention. The issue may impact platform availability or community safety.</p>
            </div>
            
            {{ range .Alerts }}
            <div class="alert">
                <h3>ğŸ”¥ {{ .Annotations.summary }}</h3>
                <p><strong>Impact:</strong> {{ .Annotations.description }}</p>
                
                <div class="labels">
                    {{ range .Labels.SortedPairs }}
                    <span class="label">{{ .Name }}: {{ .Value }}</span>
                    {{ end }}
                </div>
                
                <p><strong>Alert Started:</strong> {{ .StartsAt | date "2006-01-02 15:04:05 MST" }}</p>
                <p><strong>Severity:</strong> {{ .Labels.severity | upper }}</p>
                <p><strong>Component:</strong> {{ .Labels.component }}</p>
                <p><strong>Team:</strong> {{ .Labels.team }}</p>
            </div>
            {{ end }}
            
            <div class="action-required">
                <h3>ğŸ“‹ Next Steps</h3>
                <ol>
                    <li>Acknowledge this alert immediately</li>
                    <li>Check the monitoring dashboards for detailed metrics</li>
                    <li>Follow the incident response procedures</li>
                    <li>Update the incident status as you resolve issues</li>
                </ol>
            </div>
            
            <p style="text-align: center; margin: 20px 0;">
                <a href="https://monitoring.actplacemat.org.au/alertmanager" class="btn-critical">Acknowledge Alert</a>
                <a href="https://monitoring.actplacemat.org.au/grafana" class="btn-critical">View Dashboards</a>
                <a href="https://docs.actplacemat.org.au/runbooks" class="btn-critical">Incident Runbooks</a>
            </p>
            
            <div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 20px; text-align: center;">
                <p><strong>Emergency Contacts:</strong></p>
                <p>On-call Engineer: +61 XXX XXX XXX | Platform Team: platform@actplacemat.org.au</p>
                <p><em>Protecting our communities through reliable technology</em></p>
            </div>
        </div>
    </body>
    </html>
    {{ end }}

    {{ define "email.cultural.html" }}
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Cultural Protocol Alert - ACT Placemat</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f0f8f0; }
            .container { background-color: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-top: 5px solid #8B4513; }
            .header { background: linear-gradient(135deg, #8B4513, #CD853F); color: white; padding: 15px; margin: -20px -20px 20px -20px; border-radius: 5px 5px 0 0; }
            .cultural-notice { background-color: #fff8dc; border: 2px solid #daa520; padding: 15px; border-radius: 5px; margin: 15px 0; }
            .respect-banner { background-color: #2F4F2F; color: white; padding: 10px; text-align: center; margin: 15px 0; border-radius: 3px; }
            .alert { margin: 10px 0; padding: 15px; border-left: 4px solid #8B4513; background-color: #fafafa; }
            .btn-cultural { display: inline-block; padding: 10px 20px; background-color: #8B4513; color: white; text-decoration: none; border-radius: 3px; }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h2>ğŸŒ Cultural Protocol Alert</h2>
                <p>ACT Placemat Community Platform</p>
            </div>
            
            <div class="respect-banner">
                <p><strong>Acknowledgment of Country:</strong> We acknowledge the Traditional Custodians of the lands on which our platform operates and pay respect to Elders past, present, and emerging.</p>
            </div>
            
            <div class="cultural-notice">
                <h3>ğŸ›¡ï¸ Cultural Protocol Notification</h3>
                <p>This alert relates to cultural protocols, data sovereignty, or community governance within the ACT Placemat platform. Cultural advisor review is recommended.</p>
            </div>
            
            {{ range .Alerts }}
            <div class="alert">
                <h3>{{ .Annotations.summary }}</h3>
                <p><strong>Details:</strong> {{ .Annotations.description }}</p>
                <p><strong>Community:</strong> {{ .Labels.community_id | default "Platform-wide" }}</p>
                <p><strong>Protocol Type:</strong> {{ .Labels.protocol_type | default "General" }}</p>
                <p><strong>Time:</strong> {{ .StartsAt | date "2006-01-02 15:04:05 MST" }}</p>
            </div>
            {{ end }}
            
            <div style="background-color: #f0f8f0; padding: 15px; border-radius: 5px; margin: 20px 0;">
                <h3>ğŸ“ Cultural Advisory Team</h3>
                <p><strong>Email:</strong> cultural-advisors@actplacemat.org.au</p>
                <p><strong>Elder Council:</strong> elders@actplacemat.org.au</p>
                <p><strong>Cultural Emergency:</strong> +61 XXX XXX XXX</p>
            </div>
            
            <p style="text-align: center;">
                <a href="https://monitoring.actplacemat.org.au/cultural-dashboard" class="btn-cultural">Cultural Dashboard</a>
                <a href="https://docs.actplacemat.org.au/cultural-protocols" class="btn-cultural">Protocol Guidelines</a>
            </p>
            
            <div style="text-align: center; margin-top: 20px; font-style: italic; color: #666;">
                <p>Respecting Traditional Knowledge â€¢ Protecting Cultural Heritage â€¢ Supporting Community Sovereignty</p>
            </div>
        </div>
    </body>
    </html>
    {{ end }}

  slack.tmpl: |
    {{ define "slack.critical" }}
    ğŸš¨ *CRITICAL ALERT* ğŸš¨
    
    {{ range .Alerts }}
    *{{ .Annotations.summary }}*
    
    ğŸ“‹ *Details:* {{ .Annotations.description }}
    ğŸ·ï¸ *Component:* {{ .Labels.component }}
    ğŸ‘¥ *Team:* {{ .Labels.team }}
    â° *Started:* {{ .StartsAt | date "15:04:05 MST" }}
    
    {{ if .Annotations.runbook_url }}
    ğŸ“– <{{ .Annotations.runbook_url }}|Runbook>
    {{ end }}
    {{ end }}
    
    ğŸ”— <https://monitoring.actplacemat.org.au/grafana|Dashboards> | <https://monitoring.actplacemat.org.au/alertmanager|Manage Alerts>
    {{ end }}

    {{ define "slack.cultural" }}
    ğŸŒ *Cultural Protocol Alert*
    
    {{ range .Alerts }}
    *{{ .Annotations.summary }}*
    
    ğŸ“‹ {{ .Annotations.description }}
    ğŸ˜ï¸ *Community:* {{ .Labels.community_id | default "Platform-wide" }}
    â° *Time:* {{ .StartsAt | date "15:04:05 MST" }}
    {{ end }}
    
    ğŸ›¡ï¸ *Cultural Advisory Team* - please review this alert
    
    ğŸ“ Contact: cultural-advisors@actplacemat.org.au
    ğŸ”— <https://monitoring.actplacemat.org.au/cultural-dashboard|Cultural Dashboard>
    {{ end }}

    {{ define "slack.cultural_emergency" }}
    ğŸš¨ *CULTURAL PROTOCOL VIOLATION* ğŸš¨
    
    âš ï¸ *IMMEDIATE CULTURAL ADVISOR ATTENTION REQUIRED*
    
    {{ range .Alerts }}
    *Violation Detected:* {{ .Annotations.summary }}
    
    ğŸ“‹ *Details:* {{ .Annotations.description }}
    ğŸ˜ï¸ *Community:* {{ .Labels.community_id }}
    ğŸ”´ *Severity:* CRITICAL
    â° *Time:* {{ .StartsAt | date "15:04:05 MST" }}
    {{ end }}
    
    ğŸ†˜ *Emergency Response Required*
    ğŸ“ Elder Council: elders@actplacemat.org.au
    ğŸ“ Cultural Emergency Line: +61 XXX XXX XXX
    
    ğŸ”— <https://monitoring.actplacemat.org.au/cultural-dashboard|Cultural Dashboard>
    {{ end }}

    {{ define "slack.security" }}
    ğŸ”’ *Security Alert*
    
    {{ range .Alerts }}
    *{{ .Annotations.summary }}*
    
    ğŸ“‹ {{ .Annotations.description }}
    ğŸ¯ *Component:* {{ .Labels.component }}
    ğŸ“Š *Severity:* {{ .Labels.severity | upper }}
    â° *Time:* {{ .StartsAt | date "15:04:05 MST" }}
    {{ end }}
    
    ğŸ›¡ï¸ Security team review recommended
    ğŸ”— <https://monitoring.actplacemat.org.au/security-dashboard|Security Dashboard>
    {{ end }}

    {{ define "slack.development" }}
    ğŸ’» *Development Alert*
    
    {{ range .Alerts }}
    *{{ .Annotations.summary }}*
    
    ğŸ“‹ {{ .Annotations.description }}
    ğŸ”§ *Component:* {{ .Labels.component }}
    ğŸ“ˆ *Metric:* {{ .Labels.alertname }}
    â° *Time:* {{ .StartsAt | date "15:04:05 MST" }}
    {{ end }}
    
    ğŸ‘¨â€ğŸ’» Development team attention needed
    ğŸ”— <https://monitoring.actplacemat.org.au/grafana|Performance Dashboards>
    {{ end }}

    {{ define "slack.community" }}
    ğŸ‘¥ *Community Platform Alert*
    
    {{ range .Alerts }}
    *{{ .Annotations.summary }}*
    
    ğŸ“‹ {{ .Annotations.description }}
    ğŸ˜ï¸ *Community:* {{ .Labels.community_id | default "Platform-wide" }}
    ğŸ“Š *Metric:* {{ .Labels.alertname }}
    â° *Time:* {{ .StartsAt | date "15:04:05 MST" }}
    {{ end }}
    
    ğŸ‘¥ Community management team review recommended
    ğŸ”— <https://monitoring.actplacemat.org.au/community-dashboard|Community Dashboard>
    {{ end }}

    {{ define "slack.ai" }}
    ğŸ¤– *AI System Alert*
    
    {{ range .Alerts }}
    *{{ .Annotations.summary }}*
    
    ğŸ“‹ {{ .Annotations.description }}
    ğŸ§  *AI Component:* {{ .Labels.component }}
    âš¡ *Model:* {{ .Labels.model_name | default "General" }}
    â° *Time:* {{ .StartsAt | date "15:04:05 MST" }}
    {{ end }}
    
    ğŸ”¬ AI team investigation needed
    ğŸ”— <https://monitoring.actplacemat.org.au/ai-dashboard|AI Performance Dashboard>
    {{ end }}

    {{ define "slack.finance" }}
    ğŸ’° *Financial System Alert*
    
    {{ range .Alerts }}
    *{{ .Annotations.summary }}*
    
    ğŸ“‹ {{ .Annotations.description }}
    ğŸ’¸ *Component:* {{ .Labels.component }}
    ğŸ’³ *Transaction Type:* {{ .Labels.transaction_type | default "General" }}
    â° *Time:* {{ .StartsAt | date "15:04:05 MST" }}
    {{ end }}
    
    ğŸ’¼ Finance team review required
    ğŸ”— <https://monitoring.actplacemat.org.au/finance-dashboard|Financial Dashboard>
    {{ end }}