<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ACT Placemat Test</title>
  
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f7fa;
      color: #333;
      line-height: 1.6;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 2rem;
      text-align: center;
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    
    .section {
      background: white;
      border-radius: 8px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .test-area {
      margin-top: 1rem;
      padding: 1rem;
      background: #f0f4f8;
      border-radius: 4px;
    }
    
    .test-button {
      background: #667eea;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 0.5rem;
    }
    
    .test-button:hover {
      background: #5a6fd8;
    }
    
    .result {
      margin-top: 1rem;
      padding: 1rem;
      background: #e6f7ed;
      border-radius: 4px;
      white-space: pre-wrap;
      font-family: monospace;
    }
    
    .error {
      background: #fee2e2;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ACT Placemat Component Test</h1>
      <p>Test the components we've built</p>
    </div>
    
    <div class="section">
      <h2>Area Selector Component</h2>
      <div id="areaSelectorContainer"></div>
      <div class="test-area">
        <button class="test-button" onclick="testAreaSelector()">Test Area Selector</button>
        <div id="areaSelectorResult" class="result"></div>
      </div>
    </div>
    
    <div class="section">
      <h2>Project Display Component</h2>
      <div id="projectsContainer"></div>
      <div class="test-area">
        <button class="test-button" onclick="testProjectDisplay()">Test Project Display</button>
        <div id="projectDisplayResult" class="result"></div>
      </div>
    </div>
    
    <div class="section">
      <h2>Filter Panel Component</h2>
      <div id="filterPanelContainer"></div>
      <div class="test-area">
        <button class="test-button" onclick="testFilterPanel()">Test Filter Panel</button>
        <div id="filterPanelResult" class="result"></div>
      </div>
    </div>
    
    <div class="section">
      <h2>Notification System Component</h2>
      <div class="test-area">
        <button class="test-button" onclick="testNotificationSuccess()">Test Success</button>
        <button class="test-button" onclick="testNotificationError()">Test Error</button>
        <button class="test-button" onclick="testNotificationWarning()">Test Warning</button>
        <button class="test-button" onclick="testNotificationInfo()">Test Info</button>
        <div id="notificationResult" class="result"></div>
      </div>
    </div>
    
    <div class="section">
      <h2>Project Modal Component</h2>
      <div class="test-area">
        <button class="test-button" onclick="testProjectModal()">Test Project Modal</button>
        <div id="projectModalResult" class="result"></div>
      </div>
    </div>
  </div>
  
  <!-- Mock data for testing -->
  <script>
    const mockProjects = [
      {
        id: 'mock-proj-1',
        name: 'Community Solar Network',
        area: 'Operations & Infrastructure',
        description: 'Distributed solar energy system for community power generation and distribution.',
        status: 'Active',
        funding: 'Funded',
        lead: 'Energy Cooperative',
        tags: ['renewable', 'infrastructure', 'community-owned'],
        revenueActual: 50000,
        revenuePotential: 200000
      },
      {
        id: 'mock-proj-2',
        name: 'Indigenous Data Sovereignty Initiative',
        area: 'Story & Sovereignty',
        description: 'Creating protocols and systems for Indigenous communities to maintain control over their data and stories.',
        status: 'Building',
        funding: 'Needs Funding',
        lead: 'First Nations Tech Council',
        tags: ['indigenous', 'data-sovereignty', 'protocols']
      },
      {
        id: 'mock-proj-3',
        name: 'Community Currency Platform',
        area: 'Economic Freedom',
        description: 'Digital platform for local community currencies and mutual credit systems.',
        status: 'Active',
        funding: 'Partially Funded',
        lead: 'Local Economy Alliance',
        tags: ['local-economy', 'currency', 'mutual-credit']
      }
    ];
    
    // Test functions
    function testAreaSelector() {
      try {
        const result = document.getElementById('areaSelectorResult');
        
        // Create area selector
        const areaSelector = new AreaSelector({
          containerId: 'areaSelectorContainer',
          onSelect: (area) => {
            result.textContent = `Selected area: ${area}`;
          },
          areaData: {
            'Story & Sovereignty': {
              icon: 'ðŸ“–',
              description: 'Community-controlled narratives and data ownership',
              count: 1
            },
            'Economic Freedom': {
              icon: 'ðŸ’°',
              description: 'Community ownership and cooperative economics',
              count: 1
            },
            'Community Engagement': {
              icon: 'ðŸ¤',
              description: 'Participatory democracy and mutual aid',
              count: 0
            },
            'Operations & Infrastructure': {
              icon: 'ðŸ”§',
              description: 'Systems and tools for community resilience',
              count: 1
            },
            'Research & Development': {
              icon: 'ðŸ”¬',
              description: 'Community-led innovation and experimentation',
              count: 0
            }
          }
        });
        
        result.textContent = 'Area selector created successfully';
      } catch (error) {
        const result = document.getElementById('areaSelectorResult');
        result.textContent = `Error: ${error.message}`;
        result.classList.add('error');
      }
    }
    
    function testProjectDisplay() {
      try {
        const result = document.getElementById('projectDisplayResult');
        
        // Create project display
        const projectDisplay = new ProjectDisplay({
          containerId: 'projectsContainer',
          onProjectClick: (project) => {
            result.textContent = `Clicked project: ${project.name}`;
          }
        });
        
        // Set projects
        projectDisplay.setProjects(mockProjects);
        
        result.textContent = `Project display created successfully with ${mockProjects.length} projects`;
      } catch (error) {
        const result = document.getElementById('projectDisplayResult');
        result.textContent = `Error: ${error.message}`;
        result.classList.add('error');
      }
    }
    
    function testFilterPanel() {
      try {
        const result = document.getElementById('filterPanelResult');
        
        // Create filter panel
        const filterPanel = new FilterPanel({
          containerId: 'filterPanelContainer',
          onFilterChange: (filters) => {
            result.textContent = `Filters changed: ${JSON.stringify(filters)}`;
          },
          filterOptions: {
            statuses: ['Active', 'Building', 'Harvest', 'Completed'],
            funding: ['Funded', 'Partially Funded', 'Needs Funding'],
            tags: ['renewable', 'infrastructure', 'community-owned', 'indigenous', 'data-sovereignty', 'protocols', 'local-economy', 'currency', 'mutual-credit']
          }
        });
        
        result.textContent = 'Filter panel created successfully';
      } catch (error) {
        const result = document.getElementById('filterPanelResult');
        result.textContent = `Error: ${error.message}`;
        result.classList.add('error');
      }
    }
    
    let notificationSystem;
    
    function testNotificationSuccess() {
      try {
        const result = document.getElementById('notificationResult');
        
        // Create notification system if it doesn't exist
        if (!notificationSystem) {
          notificationSystem = new NotificationSystem();
        }
        
        // Show success notification
        notificationSystem.success('Operation completed successfully!');
        
        result.textContent = 'Success notification shown';
      } catch (error) {
        const result = document.getElementById('notificationResult');
        result.textContent = `Error: ${error.message}`;
        result.classList.add('error');
      }
    }
    
    function testNotificationError() {
      try {
        const result = document.getElementById('notificationResult');
        
        // Create notification system if it doesn't exist
        if (!notificationSystem) {
          notificationSystem = new NotificationSystem();
        }
        
        // Show error notification
        notificationSystem.error('An error occurred!');
        
        result.textContent = 'Error notification shown';
      } catch (error) {
        const result = document.getElementById('notificationResult');
        result.textContent = `Error: ${error.message}`;
        result.classList.add('error');
      }
    }
    
    function testNotificationWarning() {
      try {
        const result = document.getElementById('notificationResult');
        
        // Create notification system if it doesn't exist
        if (!notificationSystem) {
          notificationSystem = new NotificationSystem();
        }
        
        // Show warning notification
        notificationSystem.warning('This is a warning message');
        
        result.textContent = 'Warning notification shown';
      } catch (error) {
        const result = document.getElementById('notificationResult');
        result.textContent = `Error: ${error.message}`;
        result.classList.add('error');
      }
    }
    
    function testNotificationInfo() {
      try {
        const result = document.getElementById('notificationResult');
        
        // Create notification system if it doesn't exist
        if (!notificationSystem) {
          notificationSystem = new NotificationSystem();
        }
        
        // Show info notification
        notificationSystem.info('This is an informational message');
        
        result.textContent = 'Info notification shown';
      } catch (error) {
        const result = document.getElementById('notificationResult');
        result.textContent = `Error: ${error.message}`;
        result.classList.add('error');
      }
    }
    
    let projectModal;
    
    function testProjectModal() {
      try {
        const result = document.getElementById('projectModalResult');
        
        // Create project modal if it doesn't exist
        if (!projectModal) {
          projectModal = new ProjectModal({
            containerId: 'projectModalContainer'
          });
        }
        
        // Show project modal
        projectModal.open(mockProjects[0]);
        
        result.textContent = 'Project modal shown';
      } catch (error) {
        const result = document.getElementById('projectModalResult');
        result.textContent = `Error: ${error.message}`;
        result.classList.add('error');
      }
    }
  </script>
  
  <!-- Load component scripts -->
  <script src="public/js/components/AreaSelector.js"></script>
  <script src="public/js/components/ProjectDisplay.js"></script>
  <script src="public/js/components/ProjectModal.js"></script>
  <script src="public/js/components/FilterPanel.js"></script>
  <script src="public/js/components/NotificationSystem.js"></script>
</body>
</html>